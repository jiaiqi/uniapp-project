(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-fileInfo-fileInfo"],{"4d10":function(e,t,n){var i=n("24fb");t=i(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 引入uview样式 */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.file-upload .addNew[data-v-e7c6cdc0]{width:%?125?%;height:%?150?%;border:1px solid #ccc;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;margin-top:%?20?%;margin-right:%?12?%}.file-item[data-v-e7c6cdc0]{display:-webkit-box;display:-webkit-flex;display:flex;width:95%;margin:%?20?% auto;background-color:#fff;padding:%?40?% %?10?%;-webkit-box-pack:end;-webkit-justify-content:end;justify-content:end;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-shadow:0 0 5px rgba(0,0,0,.1);box-shadow:0 0 5px rgba(0,0,0,.1);-webkit-border-radius:10px;border-radius:10px}.file-item .file-item-center[data-v-e7c6cdc0]{width:75%}.file-item .file-item-center .file-item-cen-t[data-v-e7c6cdc0]{font-size:%?36?%;margin-bottom:15px;font-weight:600}.file-item .file-item-left[data-v-e7c6cdc0]{margin-right:%?30?%;margin-left:%?30?%}.file-item .file-item-left uni-image[data-v-e7c6cdc0]{width:%?50?%;height:%?50?%}.file-item .file-item-right[data-v-e7c6cdc0]{font-size:%?36?%}',""]),e.exports=t},"64a1":function(e,t,n){"use strict";var i;n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return i}));var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"file-upload"},[n("v-uni-view",{staticClass:"file-item",attrs:{id:"text"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.chooseFile.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"file-item-left"},[n("v-uni-image",{attrs:{src:"/static/word.png",mode:""}})],1),n("v-uni-view",{staticClass:"file-item-center"},[n("v-uni-view",{staticClass:"file-item-cen-t"},[e._v("选择本地文档")]),n("v-uni-view",{staticClass:"file-item-cen-b"},[e._v("点击选择本地文档")])],1),n("v-uni-view",{staticClass:"file-item-right"},[n("v-uni-text",{staticClass:"lg text-gray",class:"cuIcon-right"})],1)],1)],1)},a=[]},"99c7":function(e,t,n){"use strict";n.r(t);var i=n("a03d"),r=n.n(i);for(var a in i)"default"!==a&&function(e){n.d(t,e,(function(){return i[e]}))}(a);t["default"]=r.a},"9c55":function(e,t,n){var i=n("4d10");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var r=n("4f06").default;r("a9abe9a0",i,!0,{sourceMap:!1,shadowMode:!1})},a03d:function(e,t,n){"use strict";(function(e){var i=n("4ea4");n("a623"),n("c975"),n("a434"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("96cf");var r=i(n("1da1")),a=i(n("a112")),o=i(n("a2bb")),s={data:function(){return{fileList:[],fileInfo:{},fileResList:[],currentUserInfo:uni.getStorageSync("login_user_info"),doctor_no:"",userno:""}},props:{srvInfo:{type:Object,default:function(){}}},mixins:[o.default],onLoad:function(t){t.doctor_no&&(this.doctor_no=t.doctor_no),t.userno&&(this.userno=t.userno),e.log("option-----\x3e",t)},mounted:function(){this.$route.query.doctor_no&&(this.doctor_no=this.$route.query.doctor_no),this.$route.query.userno&&(this.userno=this.$route.query.userno)},methods:{test:function(){var t=this;e.log("-------------"),this.$nextTick((function(){setTimeout((function(){document.getElementById("text").click?document.getElementById("text").click():t.test()}),100)}))},chooseFile:function(){var e=this,t=(document.getElementById("fileTip"),document.createElement("input"));t.style="display:none",t.type="file",t.onchange=function(t){e.fileChange(t)},t.click()},fileChange:function(t){var n=this,i=(new FormData,t.target.files);if(i&&i[0]){var r=i[0];if(n.fileList.push(r),r.size>10485760)return input.value="",!1;(0,a.default)({headers:{bx_auth_ticket:uni.getStorageSync("bx_auth_ticket")},withCredentials:!1,file:r,data:{bx_auth_ticket:uni.getStorageSync("bx_auth_ticket"),serviceName:"srv_bxfile_service",interfaceName:"add",app_no:"health"},filename:"file",action:n.$api.upload,onProgress:function(e){},onSuccess:function(t){n.sendMessageLanguageInfo(t.file_no),e.log("上传成功",t)},onError:function(e,t){}})}},sendMessageLanguageInfo:function(t){var n=this;return(0,r.default)(regeneratorRuntime.mark((function i(){var r,a,o;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return r=n.getServiceUrl("health","srvhealth_consultation_chat_record_add","operate"),a=[{serviceName:"srvhealth_consultation_chat_record_add",colNames:["*"],data:[{sender_account:n.currentUserInfo.user_no,receiver_account:n.doctor_no?n.doctor_no:n.userno,msg_content_type:"文件",attachment:t}]}],e.log("res========>",a),i.next=5,n.$http.post(r,a);case 5:o=i.sent,e.log("发送成功",o),setTimeout((function(){}),1e3);case 8:case"end":return i.stop()}}),i)})))()},getFile:function(e){var t,n=this.fileList;return n.every((function(n){return t=e.uid===n.uid?n:null,!t})),t},handleProgress:function(e,t){var n=this.getFile(t);this.onProgress(e,n,this.fileList),n.percentage=e.percent||0},handleSuccess:function(e,t){var n=this.getFile(t);n&&(n.status="finished",n.response=e,this.$set(this.fileResList,0,e),this.fileInfo=e,this.$emit("add",n))},handleError:function(e,t,n){var i=this.getFile(n),r=this.fileList;i.status="fail",r.splice(r.indexOf(i),1),this.onError(e,t,n)},handleRemove:function(e){var t=this.fileList;t.splice(t.indexOf(e),1),this.onRemove(e,t)},handlePreview:function(e){"finished"===e.status&&this.onPreview(e)}}};t.default=s}).call(this,n("5a52")["default"])},a112:function(e,t,n){"use strict";function i(e,t,n){var i="fail to post ".concat(e," ").concat(n.status,"'"),r=new Error(i);return r.status=n.status,r.method="post",r.url=e,r}function r(e){var t=e.responseText||e.response;if(!t)return t;try{return JSON.parse(t)}catch(n){return t}}function a(e){if("undefined"!==typeof XMLHttpRequest){var t=new XMLHttpRequest,n=e.action;t.upload&&(t.upload.onprogress=function(t){t.total>0&&(t.percent=t.loaded/t.total*100),e.onProgress(t)});var a=new FormData;e.data&&Object.keys(e.data).map((function(t){a.append(t,e.data[t])})),a.append(e.filename,e.file),t.onerror=function(t){e.onError(t)},t.onload=function(){if(t.status<200||t.status>=300)return e.onError(i(n,e,t),r(t));e.onSuccess(r(t))},t.open("post",n,!0),e.withCredentials&&"withCredentials"in t&&(t.withCredentials=!0);var o=e.headers||{};for(var s in o)o.hasOwnProperty(s)&&null!==o[s]&&t.setRequestHeader(s,o[s]);t.send(a)}}n("99af"),n("d81d"),n("b64b"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},a2bb:function(e,t,n){"use strict";function i(e,t,n){this.$children.forEach((function(r){var a=r.$options.name;a===e?r.$emit.apply(r,[t].concat(n)):i.apply(r,[e,t].concat([n]))}))}n("99af"),n("4160"),n("159b"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={methods:{dispatch:function(e,t,n){var i=this.$parent||this.$root,r=i.$options.name;while(i&&(!r||r!==e))i=i.$parent,i&&(r=i.$options.name);i&&i.$emit.apply(i,[t].concat(n))},broadcast:function(e,t,n){i.call(this,e,t,n)}}};t.default=r},ca51:function(e,t,n){"use strict";n.r(t);var i=n("64a1"),r=n("99c7");for(var a in r)"default"!==a&&function(e){n.d(t,e,(function(){return r[e]}))}(a);n("e9b1");var o,s=n("f0c5"),c=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,"e7c6cdc0",null,!1,i["a"],o);t["default"]=c.exports},e9b1:function(e,t,n){"use strict";var i=n("9c55"),r=n.n(i);r.a}}]);