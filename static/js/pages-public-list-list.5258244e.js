(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-public-list-list"],{"0019":function(e,t,a){var o=a("83a3");"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var n=a("4f06").default;n("62abe82a",o,!0,{sourceMap:!1,shadowMode:!1})},1444:function(e,t,a){"use strict";a.r(t);var o=a("f845"),n=a.n(o);for(var r in o)"default"!==r&&function(e){a.d(t,e,(function(){return o[e]}))}(r);t["default"]=n.a},"1ec8":function(e,t,a){"use strict";a.r(t);var o=a("d93c"),n=a("1444");for(var r in n)"default"!==r&&function(e){a.d(t,e,(function(){return n[e]}))}(r);a("d693");var i,s=a("f0c5"),c=Object(s["a"])(n["default"],o["b"],o["c"],!1,null,"4f4a0c28",null,!1,o["a"],i);t["default"]=c.exports},"83a3":function(e,t,a){var o=a("24fb");t=o(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 引入uview样式 */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.add-button[data-v-4f4a0c28]{position:fixed;bottom:%?100?%;left:calc(50% - %?50?%);width:%?100?%;height:%?100?%;-webkit-border-radius:50%;border-radius:50%;background-color:#0bc99d;z-index:100}.add-button[data-v-4f4a0c28]::before{position:absolute;width:%?8?%;height:%?60?%;left:calc(50% - %?4?%);top:%?20?%;content:"";background-color:#fff}.add-button[data-v-4f4a0c28]::after{position:absolute;width:%?60?%;height:%?8?%;content:"";top:calc(50% - %?4?%);left:%?20?%;background-color:#fff}.add-button[data-v-4f4a0c28]:active{-webkit-transform:rotate(45deg);transform:rotate(45deg);-webkit-transition:all .2s;transition:all .2s}',""]),e.exports=t},d693:function(e,t,a){"use strict";var o=a("0019"),n=a.n(o);n.a},d93c:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return r})),a.d(t,"a",(function(){return o}));var o={bxList:a("e6f3").default},n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",[e.showSearchBar?a("v-uni-view",{staticClass:"search-bar"},[a("v-uni-view",{staticClass:"cu-bar search bg-white fixed"},[a("v-uni-view",{staticClass:"search-form round"},[a("v-uni-text",{staticClass:"cuIcon-search"}),a("v-uni-input",{attrs:{"adjust-position":!1,type:"text",placeholder:e.placeholder,"confirm-type":"search"},on:{focus:function(t){arguments[0]=t=e.$handleEvent(t),e.searchBarFocus.apply(void 0,arguments)},blur:function(t){arguments[0]=t=e.$handleEvent(t),e.serachBarBlur.apply(void 0,arguments)}},model:{value:e.searchVal,callback:function(t){e.searchVal=t},expression:"searchVal"}})],1),a("v-uni-view",{staticClass:"action"},[a("v-uni-button",{staticClass:"cu-btn bg-blue shadow-blur round",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.toSearch.apply(void 0,arguments)}}},[e._v("搜索")])],1)],1),a("v-uni-view",{staticStyle:{height:"100upx",width:"100%"}})],1):e._e(),a("bx-list",{ref:"bxList",attrs:{serviceName:e.serviceName,condition:e.condition,relation_condition:e.relation_condition,pageType:e.pageType,listType:"list",rowButtons:e.listConfig&&e.listConfig.rowButton?e.listConfig.rowButton:[],showTab:!1,viewTemp:e.viewTemp,listConfig:e.listConfig,showButton:e.showRowButton,fixed:!0,top:e.listTop,searchWords:e.searchVal,searchColumn:e.keyColumn,tempWord:e.tempWord,rownumber:10,showFootBtn:e.showFootBtn},on:{"click-list-item":function(t){arguments[0]=t=e.$handleEvent(t),e.clickItem.apply(void 0,arguments)},"list-change":function(t){arguments[0]=t=e.$handleEvent(t),e.listChange.apply(void 0,arguments)},clickFootBtn:function(t){arguments[0]=t=e.$handleEvent(t),e.clickFootBtn.apply(void 0,arguments)},loadEnd:function(t){arguments[0]=t=e.$handleEvent(t),e.loadEnd.apply(void 0,arguments)}}}),a("v-uni-view",{staticClass:"public-button-box"},[e.showAdd?a("v-uni-view",{staticClass:"add-button",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.clickAddButton.apply(void 0,arguments)}}}):e._e()],1)],1)},r=[]},f845:function(e,t,a){"use strict";(function(e){var o=a("4ea4");a("99af"),a("4de4"),a("4160"),a("d81d"),a("b64b"),a("159b"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("96cf");var n=o(a("1da1")),r=o(a("2909")),i=o(a("e6f3")),s={components:{bxList:i.default},data:function(){return{serviceName:"",pageType:"",placeholder:"输入搜索关键词",listConfig:{},srv_cols:[],condition:[],relation_condition:null,pattern:{color:"#7A7E83",backgroundColor:"#fff",selectedColor:"#007AFF",buttonColor:"#007AFF"},fabContent:[],fabHorizontal:"left",fabVertical:"bottom",fabDirection:"horizontal",listTop:0,showRowButton:"true",viewTemp:{},publicButton:[],searchVal:"",keyColumn:"",showAdd:!1,noData:!1,showSearchBar:!1,showFootBtn:!0,tempWord:{},queryParams:{},queryOption:{},navigationBarTitle:null}},onReachBottom:function(){e.log("触底"),this.noData||(this.$refs.bxList.pageInfo.pageNo++,this.$refs.bxList.getListData().then((function(e){})))},onShow:function(){this.serviceName&&this.$refs.bxList&&this.$refs.bxList.onRefresh()},onLoad:function(t){var a=this,o={};if(this.listTop=0,o=t.query?JSON.parse(decodeURIComponent(t.query)):t,t.hasOwnProperty("showAdd")&&(this.queryOption=t),"srvzhxq_clgl_select"==o.serviceName){this.getUserInfo().then((function(t){e.log("u------",t),t;var o=[{colName:"lybm",ruleType:"eq",value:t.lybm},{colName:"dybm",ruleType:"eq",value:t.dybm},{colName:"fwbm",ruleType:"eq",value:t.fwbm}];a.condition=[].concat((0,r.default)(a.condition),o),e.log("users=====",a.condition)}))}if(o.viewTemp&&(this.viewTemp=JSON.parse(o.viewTemp),this.viewTemp.title&&(this.keyColumn=this.viewTemp.title),o.destApp&&uni.setStorageSync("activeApp",o.destApp)),o.cond)try{var n=JSON.parse(decodeURIComponent(o.cond));Array.isArray(n)&&(n.forEach((function(e){"create_user"!==e.colName&&"openid"!==e.colName&&"glry"!==e.colName||"user_no"!==e.value||(e.value=uni.getStorageSync("login_user_info").user_no)})),this.condition=n)}catch(c){e.log(c)}if(o.relation_condition)try{var i=JSON.parse(decodeURIComponent(o.relation_condition));Array.isArray(i.data)&&(i.data.forEach((function(e){"create_user"!==e.colName&&"openid"!==e.colName&&"glry"!==e.colName||"user_no"!==e.value||(e.value=uni.getStorageSync("login_user_info").user_no)})),this.relation_condition=i)}catch(c){e.log(c)}if(o.tempWord&&(this.tempWord=JSON.parse(o.tempWord)),o.showRowButton&&(this.showRowButton=o.showRowButton),o.serviceName&&o.pageType){if(this.serviceName=o.serviceName,this.pageType=o.pageType,o.params){var s={};if("string"===typeof o.params)try{s=JSON.parse(o.params),this.queryParams=s}catch(c){}}this.getListV2()}},methods:{getUserInfo:function(){var e=this;return(0,n.default)(regeneratorRuntime.mark((function t(){var a,o,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=uni.getStorageSync("basics_info").picp,o=e.getServiceUrl("zhxq","srvzhxq_syrk_select","select"),n={serviceName:"srvzhxq_syrk_select",colNames:["*"],condition:[{colName:"gmsfhm",ruleType:"eq",value:a},{colName:"proc_status",ruleType:"eq",value:"完成"},{colName:"status",ruleType:"eq",value:"有效"}]},t.next=5,e.$http.post(o,n);case 5:return r=t.sent,t.abrupt("return",r.data.data[0]);case 7:case"end":return t.stop()}}),t)})))()},toSearch:function(){this.searchVal;this.$refs.bxList.toSearch()},loadEnd:function(e){this.noData=!0},clickAddButton:function(){var e=this;"proc"===this.pageType?this.publicButton.map((function(t){"add"!==t.button_type&&"apply"!==t.button_type||uni.navigateTo({url:"/pages/public/proc/apply/apply?serviceName="+t.service_name+"&cond="+decodeURIComponent(JSON.stringify(e.condition))})})):this.publicButton.map((function(t){if("add"===t.button_type){t.service_name,t.service_view_name;uni.navigateTo({url:"../formPage/formPage?serviceName="+t.service_name+"&type=add&cond="+decodeURIComponent(JSON.stringify(e.condition))})}else if("customize"===t.button_type&&"住户录入"===t.button_name){var a=e.queryParams,o=(e.condition,{type:"add",serviceName:t.service_name,defaultVal:a.defaultVal,eventOrigin:t,cond:[{colName:"fwbm",ruleType:"condition",value:[{colName:"dybm",ruleType:"eq",value:"dybm"},{colName:"lybm",ruleType:"eq",value:"lybm"}]}]});e.queryOption&&"house"===e.queryOption.form&&(o.cond=[]),uni.navigateTo({url:"/pages/public/formPage/formPage?params="+JSON.stringify(o)})}}))},searchBarFocus:function(t){e.log("searchBarFocus:",t)},serachBarBlur:function(t){e.log("serachBarBlur:",t)},listChange:function(t){e.log("listChange:",t)},clickItem:function(t){if("proc"===this.pageType)uni.navigateTo({url:"/pages/public/proc/procDetail/procDetail?proc_instance_no="+t.proc_instance_no});else{var a={button:{button_name:"详情",button_type:"detail",service_name:this.serviceName},row:t};try{this.onButtonToUrl(a).then((function(t){e.log("clickItem :",t)}))}catch(t){}}e.log("click-list-item:",t)},clickFootBtn:function(t){var a=this;return(0,n.default)(regeneratorRuntime.mark((function o(){var n,r,i,s,c,l;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(n=t.button,r=t.row,!n.operate_params||"string"!==typeof n.operate_params){o.next=23;break}if(o.prev=3,n.operate_params=JSON.parse(n.operate_params),Array.isArray(n.operate_params.condition)&&n.operate_params.condition.length>0&&n.operate_params.condition.forEach((function(e){"object"===typeof e.value&&"rowData"===e.value.value_type?e.value=t.row[e.value.value_key]:"object"===typeof e.value&&"constant"===e.value.value_type&&(e.value=e.value.value)})),Array.isArray(n.operate_params.data)&&n.operate_params.data.length>0&&n.operate_params.data.forEach((function(e){"object"===typeof e&&Object.keys(e).forEach((function(t){"object"===typeof e[t]&&"rowData"===e[t].value_type?e[t]=r[e[t].value_key]:"object"===typeof e[t]&&"constant"===e[t].value_type&&(e[t]=e[t].value)}))})),"操作"!==n.operate_type||"静默操作"!==n.operate_mode){o.next=17;break}return i=[{serviceName:n.operate_service,condition:n.operate_params.condition,data:n.operate_params.data}],s=uni.getStorageSync("activeApp"),c=a.getServiceUrl(n.application?n.application:s,n.operate_service,n.servcie_type),o.next=13,a.$http.post(c,i);case 13:l=o.sent,"SUCCESS"===l.data.state&&a.$refs.bxList.onRefresh(),o.next=18;break;case 17:"更新弹出"===n.operate_type&&({type:n.servcie_type,serviceName:n.operate_service,defaultVal:{}},uni.navigateTo({url:"/pages/public/formPage/formPage?serviceName="+n.operate_service+"&type="+n.servcie_type+"&cond="+decodeURIComponent(JSON.stringify(n.operate_params.condition))}));case 18:o.next=23;break;case 20:o.prev=20,o.t0=o["catch"](3),e.error(o.t0);case 23:"proc"===a.pageType?t.button&&"edit"===t.button.button_type&&t.row.proc_instance_no&&uni.navigateTo({url:"/pages/public/proc/procDetail/procDetail?proc_instance_no="+t.row.proc_instance_no}):a.onButtonToUrl(t).then((function(o){if(t.button&&"delete"===t.button.button_type&&"SUCCESS"===o.state&&a.$refs.bxList.onRefresh(),t.button&&"detail"===t.button.button_type){var n=o.row,r=o.button,i={type:"detail",condition:[{colName:"id",ruleType:"in",value:n.id}],serviceName:r.service_name,defaultVal:n};uni.navigateTo({url:"/pages/public/formPage/formPage?params="+JSON.stringify(i)})}else if(t.button&&"customize"===t.button.button_type){var s=t.button.more_config;if("string"===typeof s)try{s=JSON.parse(s)}catch(v){e.log(v)}if("add"===t.button.servcie_type){var c={type:"add",serviceName:o.button.service_name,defaultVal:o.row,eventOrigin:o.button};(t.button.main_table="srvzhxq_syrk_add"===t.button.operate_service)&&(c.cond=[{colName:"fwbm",ruleType:"condition",value:[{colName:"dybm",ruleType:"eq",value:"dybm"},{colName:"lybm",ruleType:"eq",value:"lybm"}]}]),uni.navigateTo({url:"/pages/public/formPage/formPage?params="+JSON.stringify(c)})}else if("select"===t.button.servcie_type){var l={type:"select",serviceName:o.button.service_name,defaultVal:o.row,eventOrigin:o.button};if((t.button.main_table="srvzhxq_syrk_select"===t.button.operate_service)&&(l.cond=[{colName:"fwbm",ruleType:"condition",value:[{colName:"dybm",ruleType:"eq",value:"dybm"},{colName:"lybm",ruleType:"eq",value:"lybm"}]}]),"绑定房屋"===t.button.button_name)if(t.row.person_no){var u=a.getServiceUrl("zhxq","srvzhxq_syrk_select","select"),p={serviceName:"srvzhxq_syrk_select",colNames:["*"],condition:[{colName:"is_fuzeren",ruleType:"eq",value:"是"},{colName:"openid",ruleType:"eq",value:uni.getStorageSync("login_user_info").user_no},{colName:"status",ruleType:"eq",value:"有效"}],order:[{colName:"create_time",orderType:"asc"}]};a.$http.post(u,p).then((function(e){e.data.data.length>0?uni.navigateTo({url:"/pages/public/list/list?serviceName=srvzhxq_syrk_select&pageType=list&params=".concat(JSON.stringify(l),'&viewTemp={"title":"_fwbm_disp","img":"zp","tip":"xm","footer":"gmsfhm"}&navigationBarTitle=房屋信息&showRowButton=true&cond=[{"colName":"person_no","ruleType":"like","value":"').concat(t.row.person_no,'"},{"colName":"proc_status","ruleType":"eq","value":"完成"},{ "colName": "status", "ruleType": "eq", "value": "有效" }]')}):uni.showToast({title:"非房屋负责人不可进行此操作",duration:1e3,icon:"none"})}))}else uni.navigateTo({url:"/pages/public/list/list?serviceName=srvzhxq_syrk_select&pageType=list&navigationBarTitle=房屋信息&params=".concat(JSON.stringify(l),'&viewTemp={"title":"_fwbm_disp","img":"zp","tip":"xm","footer":"gmsfhm"}&showRowButton=true&cond=[{"colName":"openid","ruleType":"like","value":"').concat(t.row.openid,'"},{"colName":"proc_status","ruleType":"eq","value":"完成"},{ "colName": "status", "ruleType": "eq", "value": "有效" }]')});else uni.navigateTo({url:'/pages/public/list/list?serviceName=srvzhxq_syrk_select&pageType=list&viewTemp={"title":"_fwbm_disp","tip":"fwyt","footer":"rylx"}&cond=[{"colName":"is_fuzeren","ruleType":"like","value":"是"},{"colName":"openid","ruleType":"like","value":"user_no"}]'})}}else if("add"===t.button.servcie_type){var d={type:"add",serviceName:o.button.service_name,defaultVal:o.row,eventOrigin:o.button};(t.button.main_table="srvzhxq_syrk_add"===t.button.operate_service)&&(d.cond=[{colName:"fwbm",ruleType:"condition",value:[{colName:"dybm",ruleType:"eq",value:"dybm"},{colName:"lybm",ruleType:"eq",value:"lybm"}]}]),uni.navigateTo({url:"/pages/public/formPage/formPage?params="+JSON.stringify(d)})}else t.button&&"流程申请"===t.button.operate_type&&uni.navigateTo({url:"/pages/public/proc/apply/apply?serviceName="+t.button.operate_service})})),e.log("clickFootBtn:",t);case 25:case"end":return o.stop()}}),o,null,[[3,20]])})))()},getListV2:function(){var t=this;return(0,n.default)(regeneratorRuntime.mark((function a(){var o,n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return o=uni.getStorageSync("activeApp"),n=t,a.next=4,t.getServiceV2(t.serviceName,"list","proc"===t.pageType?"proclist":"list",o);case 4:return r=a.sent,r.srv_cols=r.srv_cols.filter((function(e){return 1===e.in_list||2===e.in_list})),t.navigationBarTitle||uni.setNavigationBarTitle({title:r.service_view_name}),e.log("colVs",r),t.listConfig=r,"proc"===t.pageType&&(t.showFootBtn=!1),t.publicButton=r.gridButton.filter((function(e){if(!0===e.permission)switch(e.button_type){case"add":case"apply":return t.showAdd=!0,e;case"select":return t.showSearchBar=!0,e;case"customize":if("zhxq"===e.application&&"住户录入"===e.button_name)return n.queryOption&&n.queryOption.hasOwnProperty("showAdd")?n.showAdd="false"!==n.queryOption.showAdd&&("true"==n.queryOption.showAdd||n.queryOption.showAdd):n.showAdd=!0,e}})),a.abrupt("return",r);case 12:case"end":return a.stop()}}),a)})))()}},onShareAppMessage:function(e){return"applyProc"===e.target.dataset.info.button_type&&"邀请"===e.target.dataset.info.button_name&&e.target.dataset.procno?{title:"绑定住户邀请",path:"/pages/specific/shareBind/shareBind?proc_instance_no="+e.target.dataset.procno}:"customize"!==e.target.dataset.info.button_type||"邀请绑定"!=e.target.dataset.info.button_name&&"重新绑定"!=e.target.dataset.info.button_name&&"邀请绑定账号"!=e.target.dataset.info.button_name&&"重新绑定账号"!=e.target.dataset.info.button_name||!e.target.dataset.id?{title:"分享测试",path:"/pages/public/proc/procDetail/procDetail?proc_instance_no="+e.target.dataset.procno}:{title:"绑定住户邀请",path:"/pages/specific/shareBind/shareBind?dataid="+e.target.dataset.id+"&serviceName=srvzhxq_member_update"}},onShareTimeline:function(t){e.log(t)}};t.default=s}).call(this,a("5a52")["default"])}}]);