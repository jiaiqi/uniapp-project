(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-specific-added-added"],{"04b1":function(e,t,a){"use strict";a.r(t);var i=a("af0b"),n=a("2f65");for(var r in n)"default"!==r&&function(e){a.d(t,e,(function(){return n[e]}))}(r);a("d026");var s,o=a("f0c5"),c=Object(o["a"])(n["default"],i["b"],i["c"],!1,null,"3fd7ec87",null,!1,i["a"],s);t["default"]=c.exports},"1eff":function(e,t,a){var i=a("3a5b");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=a("4f06").default;n("cecb3010",i,!0,{sourceMap:!1,shadowMode:!1})},"2f65":function(e,t,a){"use strict";a.r(t);var i=a("34d4"),n=a.n(i);for(var r in i)"default"!==r&&function(e){a.d(t,e,(function(){return i[e]}))}(r);t["default"]=n.a},"34d4":function(module,exports,__webpack_require__){"use strict";(function(console){var _interopRequireDefault=__webpack_require__("4ea4");__webpack_require__("4de4"),__webpack_require__("4160"),__webpack_require__("d81d"),__webpack_require__("b64b"),__webpack_require__("159b"),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,__webpack_require__("96cf");var _asyncToGenerator2=_interopRequireDefault(__webpack_require__("1da1")),_bxForm=_interopRequireDefault(__webpack_require__("eaae")),_default={components:{bxform:_bxForm.default},data:function(){return{appName:"daq",navTitle:"",activity_no:"",activityData:null,fields:[],allFields:[],formData:{},loadedType:"srvV2",colsV2Data:null,type:"",serviceName:""}},onLoad:function(e){var t=this;e.type&&(this.type=e.type,"add"===e.type?this.navTitle="创建问卷":"update"===e.type&&(this.navTitle="编辑问卷信息")),e.serviceName&&(this.serviceName=e.serviceName,e.activity_no?(this.activity_no=e.activity_no,this.getActivityInfo(e.activity_no).then((function(){t.getFieldsV2()}))):this.getFieldsV2())},methods:{valueChange:function(e,t){this.formData[e.column]=t[e.column],this.fields=this.getShowFields(this.formData)},getActivityInfo:function(e){var t=this;return(0,_asyncToGenerator2.default)(regeneratorRuntime.mark((function a(){var i,n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i=t.getServiceUrl(t.appName?t.appName:"daq","srvdaq_init_view_select","select"),n={serviceName:"srvdaq_init_view_select",condition:[{colName:"activity_no",ruleType:"eq",value:e},{colName:"biz_type",ruleType:"eq",value:"cfg"}]},a.next=4,t.$http.post(i,n);case 4:r=a.sent,console.log("srvdaq_init_view_select",r),"SUCCESS"===r.data.state&&r.data.data.length>0&&(t.activityData=r.data.data[0],console.log("this.activityData",t.activityData));case 7:case"end":return a.stop()}}),a)})))()},DateChange:function(e){this.date=e.detail.value},toUpdate:function(){var e=this,t=this.type,a=e.$refs.bxForm.getFieldModel();a&&uni.showModal({title:"提示",content:"add"===t?"确认创建问卷？":"update"===t?"确认修改问卷信息？":"",success:function(t){if(t.confirm){console.log("itemData",a);var i=e.getServiceUrl(e.appName?e.appName:"daq","srvdaq_activity_cfg_add","add"),n=[{serviceName:"srvdaq_activity_cfg_add",data:[a]}];a?(console.log("itemData",a),e.activity_no?(i=e.getServiceUrl(e.appName?e.appName:"daq","srvdaq_activity_cfg_update","operate"),n=[{serviceName:"srvdaq_activity_cfg_update",condition:[{colName:"activity_no",ruleType:"eq",value:e.activity_no}],data:[a]}],e.$http.post(i,n).then((function(t){console.log("srvdaq_activity_cfg_update",t),"SUCCESS"===t.data.state&&t.data.response.length>0&&(e.activieyData=e.getResData(t.data.response),uni.showToast({title:"编辑成功"}),uni.redirectTo({url:"/pages/specific/activityUpdate/activityUpdate?activity_no="+e.activity_no}))}))):(Object.keys(a).forEach((function(e){a[e]||delete a[e]})),i=e.getServiceUrl(e.appName?e.appName:"daq","srvdaq_activity_cfg_add","add"),n=[{serviceName:"srvdaq_activity_cfg_add",data:[a]}],e.$http.post(i,n).then((function(t){if(console.log("srvdaq_activity_cfg_add",t),"SUCCESS"===t.data.state&&t.data.response.length>0){e.activieyData=e.getResData(t.data.response),uni.showToast({title:"创建成功"});var a=t.data.response[0].response.effect_data[0].activity_no;uni.redirectTo({url:"/pages/specific/activityUpdate/activityUpdate?activity_no="+a})}})))):console.log("表单填写不完整")}}})},getFieldsV2:function(){var e=(0,_asyncToGenerator2.default)(regeneratorRuntime.mark((function e(){var t,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getServiceV2(this.serviceName,this.type,this.type,this.appName?this.appName:"daq");case 2:t=e.sent,t=this.deepClone(t),console.log(t),this.colsV2Data=t,a=this.type,console.log("colsV2Data",t),i=[],e.t0=a,e.next="update"===e.t0?12:"add"===e.t0?15:"detail"===e.t0?17:19;break;case 12:return i=this.setFieldsDefaultVal(t._fieldInfo,this.activityData),this.formData=this.activityData,e.abrupt("break",20);case 15:return i=t._fieldInfo.map((function(e){return e.defaultValue&&(e.value=e.defaultValue),e})),e.abrupt("break",20);case 17:return i=this.setFieldsDefaultVal(t._fieldInfo,this.activityData),e.abrupt("break",20);case 19:return e.abrupt("break",20);case 20:i&&Array.isArray(i)&&(i=i.filter((function(e,t){if(e.value||(e.value=""),"activity_no"===e.column&&(e["disabled"]=!0),1===e["in_"+a])return e})),this.allFields=i,this.fields=this.getShowFields(this.formData));case 21:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getShowFields:function getShowFields(){var formData=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},allFields=this.allFields;return allFields=allFields.filter((function(field){if(field._colDatas.x_if){var isShow=eval("("+field._colDatas.x_if+")"),result=isShow(formData);return result}return!0})),allFields}},watch:{fields:{handler:function(e,t){},deep:!0}}};exports.default=_default}).call(this,__webpack_require__("5a52")["default"])},"3a5b":function(e,t,a){var i=a("24fb");t=i(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 引入uview样式 */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.cu-form-group[data-v-3fd7ec87]{background-color:#fff;padding:%?1?% %?30?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-align:self-start;-webkit-align-items:self-start;align-items:self-start;min-height:%?100?%;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.cu-form-group .title[data-v-3fd7ec87]{width:100vw;display:block}.cu-form-group uni-input[data-v-3fd7ec87]{width:100%;-webkit-box-flex:1;-webkit-flex:1;flex:1}.cu-form-group uni-text[class*="cuIcon-"][data-v-3fd7ec87]{font-size:%?36?%;padding:0;-webkit-box-sizing:border-box;box-sizing:border-box}.cu-form-group uni-textarea[data-v-3fd7ec87]{margin:%?32?% 0 %?30?%;height:4.6em;width:100%;line-height:1.2em;-webkit-box-flex:1;-webkit-flex:1;flex:1;font-size:%?28?%;padding:0}',""]),e.exports=t},af0b:function(e,t,a){"use strict";var i;a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return r})),a.d(t,"a",(function(){return i}));var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",[a("cu-custom",{attrs:{bgColor:"bg-blue",isBack:!0}},[a("template",{attrs:{slot:"backText"},slot:"backText"},[e._v("返回")]),a("template",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(e.navTitle))])],2),e.fields&&e.fields.length>0?a("v-uni-view",{},[a("bxform",{ref:"bxForm",attrs:{pageType:e.type,BxformType:e.type,fields:e.fields},on:{"value-blur":function(t){arguments[0]=t=e.$handleEvent(t),e.valueChange.apply(void 0,arguments)}}})],1):e._e(),a("v-uni-view",{staticClass:"padding-xl",staticStyle:{"background-color":"#fff"}},[e.fields&&e.fields.length>0?a("v-uni-button",{staticClass:"cu-btn block bg-blue margin-tb-sm lg",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.toUpdate.apply(void 0,arguments)}}},[e._v("提交")]):e._e()],1)],1)},r=[]},d026:function(e,t,a){"use strict";var i=a("1eff"),n=a.n(i);n.a}}]);